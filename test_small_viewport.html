<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Small Viewport Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f0f0f0;
        }

        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .viewport-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            font-family: monospace;
        }

        .test-button {
            background: #007F8C;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }

        .test-button:hover {
            background: #016974;
        }

        .spacer {
            height: 300px;
            background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%),
                        linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #f0f0f0 75%),
                        linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 18px;
            margin: 20px 0;
        }

        .iframe-container {
            border: 2px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }

        iframe {
            width: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Small Viewport Test for Combobox Height</h1>
        <p>This page tests the combobox height calculation in different viewport sizes.</p>

        <div class="viewport-info" id="viewportInfo">
            Loading viewport information...
        </div>

        <div>
            <button class="test-button" onclick="openMainApp()">Open Main App</button>
            <button class="test-button" onclick="testSmallViewport()">Test Small Viewport (400px)</button>
            <button class="test-button" onclick="testMediumViewport()">Test Medium Viewport (600px)</button>
            <button class="test-button" onclick="testLargeViewport()">Test Large Viewport (800px)</button>
        </div>
    </div>

    <div class="spacer">
        Content spacer to push combobox down
    </div>

    <div class="test-container">
        <h2>Embedded Test</h2>
        <p>The iframe below shows the main application in a constrained viewport:</p>

        <div class="iframe-container">
            <iframe id="testFrame" src="http://localhost:4000" height="400"></iframe>
        </div>

        <div style="margin-top: 15px;">
            <button class="test-button" onclick="changeFrameHeight(300)">300px Height</button>
            <button class="test-button" onclick="changeFrameHeight(400)">400px Height</button>
            <button class="test-button" onclick="changeFrameHeight(500)">500px Height</button>
            <button class="test-button" onclick="changeFrameHeight(600)">600px Height</button>
        </div>
    </div>

    <script>
        function updateViewportInfo() {
            const info = document.getElementById('viewportInfo');
            const width = window.innerWidth;
            const height = window.innerHeight;

            info.innerHTML = `
                Viewport: ${width}px Ã— ${height}px<br>
                Available for combobox (with 50px margin): ${height - 200 - 50}px<br>
                (Assuming combobox starts at 200px from top)
            `;
        }

        function openMainApp() {
            window.open('http://localhost:4000', '_blank');
        }

        function testSmallViewport() {
            window.open('http://localhost:4000', 'smallTest', 'width=400,height=400,scrollbars=yes');
        }

        function testMediumViewport() {
            window.open('http://localhost:4000', 'mediumTest', 'width=600,height=600,scrollbars=yes');
        }

        function testLargeViewport() {
            window.open('http://localhost:4000', 'largeTest', 'width=800,height=800,scrollbars=yes');
        }

        function changeFrameHeight(height) {
            document.getElementById('testFrame').height = height;
        }

        // Update viewport info on load and resize
        window.addEventListener('load', updateViewportInfo);
        window.addEventListener('resize', updateViewportInfo);

        // Initial update
        updateViewportInfo();
    </script>
</body>
</html>
